<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; Load Data – The Imaginary Healthy Patient</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data-cleaning.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ TeX: { extensions: ["color.js"] }});
</script>
<script type="text/x-mathjax-config">
	MathJax.Hub.Register.StartupHook("TeX color Ready", function() {
	     MathJax.Extension["TeX/color"].colors["wongBlack"] = '#000000';
		 MathJax.Extension["TeX/color"].colors["wongGold"] = '#E69F00';
		 MathJax.Extension["TeX/color"].colors["wongLightBlue"] = '#56B4E9';
		 MathJax.Extension["TeX/color"].colors["wongGreen"] = '#009E73';
		 MathJax.Extension["TeX/color"].colors["wongYellow"] = '#F0E442';
		 MathJax.Extension["TeX/color"].colors["wongBlue"] = '#0072B2';
		 MathJax.Extension["TeX/color"].colors["wongOrange"] = '#D55E00';
		 MathJax.Extension["TeX/color"].colors["wongPurple"] = '#CC79A7';
		 
		 
		 MathJax.Extension["TeX/color"].colors["IBMBlue"] = '#648FFF';
		 MathJax.Extension["TeX/color"].colors["IBMPurple"] = '#785EF0';
		 MathJax.Extension["TeX/color"].colors["IBMMagenta"] = '#DC267F';
		 MathJax.Extension["TeX/color"].colors["IBMOrange"] = '#FE6100';
		 MathJax.Extension["TeX/color"].colors["IBMYellow"] = '#FFB000';
	});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">The Imaginary Healthy Patient</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/3wen/imaginary-healthy"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-load_data.html">I Data</a></li><li class="breadcrumb-item"><a href="./data-load_data.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Load Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">I Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-load_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Load Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-sunlight.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Sunlight Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-descriptive_statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">II Classifiers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classif-estimations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Estimations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classif-results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">III SHAP</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shap-estimations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Estimations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shap-results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">IV Robustness Checks: MHI-3</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-data-cleaning-mhi3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-descriptive_statistics-mhi3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-classif-estimations-mhi3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Classification Estimations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-classif-results-mhi3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Classification Results</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-shap-estimations-mhi3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">SHAP Estimations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-shap-results-mhi3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">SHAP Results</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">V Robustness Checks: SAH</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-data-cleaning-sah.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-descriptive_statistics-sah.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-classif-estimations-sah.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Estimations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-classif-results-sah.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-shap-estimations-sah.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Estimations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./robustness-shap-results-sah.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">SHAP Results</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#loading-and-merging-datasets" id="toc-loading-and-merging-datasets" class="nav-link active" data-scroll-target="#loading-and-merging-datasets"><span class="header-section-number">1.1</span> Loading and Merging Datasets</a></li>
  <li><a href="#correction-of-the-mhi-5-score" id="toc-correction-of-the-mhi-5-score" class="nav-link" data-scroll-target="#correction-of-the-mhi-5-score"><span class="header-section-number">1.2</span> Correction of the MHI-5 score</a></li>
  <li><a href="#data-formatting" id="toc-data-formatting" class="nav-link" data-scroll-target="#data-formatting"><span class="header-section-number">1.3</span> Data formatting</a></li>
  <li><a href="#sec-MHI-Scores" id="toc-sec-MHI-Scores" class="nav-link" data-scroll-target="#sec-MHI-Scores"><span class="header-section-number">1.4</span> Computing manually the MHI Scores</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-load_data.html">I Data</a></li><li class="breadcrumb-item"><a href="./data-load_data.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Load Data</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-intro" class="quarto-section-identifier"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Load Data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p>This notebook explains how the data are loaded.</p>
<p>We merge together different datasets:</p>
<ul>
<li>ESPS survey data</li>
<li>SNIIRAM data (Health consumption from Social Security data)</li>
<li>sunlight data (see <a href="data-sunlight.html" class="quarto-xref">Chapter&nbsp;<span>3</span></a>).</li>
</ul>
</div>
</div>
<p>The data dictionary for the ESPS survey is available on the <a href="https://www.irdes.fr/recherche/enquetes/esps-enquete-sur-la-sante-et-la-protection-sociale/dictionnaire-2012/index.htm">IRDES website</a>.</p>
<section id="loading-and-merging-datasets" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="loading-and-merging-datasets"><span class="header-section-number">1.1</span> Loading and Merging Datasets</h2>
<p>Let us first load {<code>tidyverse</code>}:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>Then we can import the survey data from the CSV files:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 17%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">File name</th>
<th style="text-align: center;">Source</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>personne.csv</code></td>
<td style="text-align: center;">ESPS</td>
<td style="text-align: left;">Individual characteristics</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>menage.csv</code></td>
<td style="text-align: center;">ESPS</td>
<td style="text-align: left;">Household characteristics</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>mutuelle.csv</code></td>
<td style="text-align: center;">ESPS</td>
<td style="text-align: left;">Mutual insurance characteristics</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>opinion1.csv</code></td>
<td style="text-align: center;">ESPS</td>
<td style="text-align: left;">Opinion on some research questions (during the first contact)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>qst.csv</code></td>
<td style="text-align: center;">ESPS</td>
<td style="text-align: left;">Working conditions</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>qes.csv</code></td>
<td style="text-align: center;">ESPS</td>
<td style="text-align: left;">Economic and social situation</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>deppers2012.dta</code></td>
<td style="text-align: center;">SNIIRAM</td>
<td style="text-align: left;">Data on health consumption</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>map_regions_2014.rda</code></td>
<td style="text-align: center;">IGN</td>
<td style="text-align: left;">France Map</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ensol_regions.rda</code></td>
<td style="text-align: center;">Météo France</td>
<td style="text-align: left;">Sunlight data</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df_personne <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/data_esps/personne.csv"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>df_menage <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/data_esps/menage.csv"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>mutuelle <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/data_esps/mutuelle.csv"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df_opinion_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/data_esps/opinion1.csv"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>df_qst <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/data_esps/qst.csv"</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df_qes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/data_esps/qes.csv"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>data_sniiram <span class="ot">&lt;-</span> foreign<span class="sc">::</span><span class="fu">read.dta</span>(<span class="st">"../data/sniiram/deppers2012.dta"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nind =</span> <span class="fu">as.numeric</span>(nind))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also load some sunlight data (see <a href="6_sunlight.html">the sunlight notebook</a> for more details on those):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"../data/meteo/ensol_regions.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us add a prefix (<code>"SOIN"</code>) to the names of the variables from the SNIIRAM:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_sniiram <span class="ot">&lt;-</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  data_sniiram <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">str_c</span>(<span class="st">"SOINS_"</span>, .)) <span class="sc">|&gt;</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ben_n4 =</span> SOINS_ben_n4, <span class="at">nind =</span> SOINS_nind)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Some people in the table <code>mutuelle</code> (mutual insurance) have two rows (we create a group index here to avoid displaying the real ID):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mutuelle<span class="sc">$</span>group_ID <span class="ot">&lt;-</span> <span class="fu">group_by</span>(mutuelle, ben_n4, nind) <span class="sc">|&gt;</span> <span class="fu">group_indices</span>()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>mutuelle <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ben_n4, <span class="sc">-</span>nind) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group_ID) <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(count), group_ID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,647 × 10
# Groups:   group_ID [809]
    ...1 nmut  typcc  idcc  assu i_entrepr entrepr nindassu_gv group_ID count
   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;          &lt;int&gt; &lt;int&gt;
 1   830 01        0 99999     1         1       1 01               813     4
 2   831 02        1 55924     2         1       1 02               813     4
 3   835 03        1 60038     1         1       2 01               813     4
 4   837 04        1 60038     1         1       2 01               813     4
 5  7975 01        1 10002     1         1       1 02              7673     4
 6  7977 02        2 70506     2         1       1 01              7673     4
 7  7980 03        2 70109     2         1       1 01              7673     4
 8  7983 04        1 60038     2         1       2 01              7673     4
 9   626 01        1 31003     2         1       1 01               616     3
10   627 02        4 90001     1         1       1 02               616     3
# ℹ 1,637 more rows</code></pre>
</div>
</div>
<p>The number of observations in <code>mutuelles</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mutuelle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20779</code></pre>
</div>
</div>
<p>The number of unique individuals in <code>mutuelles</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mutuelle <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group_ID) <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 19941</code></pre>
</div>
</div>
<p>Let us randomly pick an observation among the two available for the <code>838</code> persons for which two rows are present in <code>mutuelle</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">17463</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df_mutuelle_sans_redondance <span class="ot">&lt;-</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  mutuelle <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group_ID) <span class="sc">|&gt;</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>group_ID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The number of unique individuals left is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mutuelle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20779</code></pre>
</div>
</div>
<p>Let us add a prefix (<code>"MUTUELLE"</code>) to the names of the variables from <code>df_mutuelle_sans_redondance</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>df_mutuelle_sans_redondance <span class="ot">&lt;-</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  df_mutuelle_sans_redondance <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">str_c</span>(<span class="st">"MUTUELLE_"</span>, .)) <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ben_n4 =</span> MUTUELLE_ben_n4, <span class="at">nind =</span> MUTUELLE_nind)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us focus on individual characteristics. Those are recorded in the table <code>df_personne</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_personne)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23047</code></pre>
</div>
</div>
<p>As can be seen, this table contains 23047 individuals. We can also observe that we are able to find a match for all these people in the household characteristics (<code>df_menage</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_personne <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add household characteristics</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_menage, <span class="at">by =</span> <span class="st">"ben_n4"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>But we are not able to find a match for all individuals in some parts of the ESPS database. That is normal, as some questions were asked to the respondents only if they have specific attributes. Let us check how many people from <code>df_personne</code> cannot be found in the different parts of the ESPS survey. First, let us consider the <code>df_opinion_1</code> dataset. The number of individuals who did not respond to questions relative to this part (see <a href="https://www.irdes.fr/recherche/enquetes/esps-enquete-sur-la-sante-et-la-protection-sociale/dictionnaire-2012/opinion1/questions-de-recherche-portant-sur-le-r%C3%A9pondant-au-1er-contact.html">variable dictionary</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df_personne <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_opinion_1, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14634</code></pre>
</div>
</div>
<p>Then, we can consider the <code>df_qst</code> dataset (see <a href="https://www.irdes.fr/recherche/enquetes/esps-enquete-sur-la-sante-et-la-protection-sociale/dictionnaire-2012/qst/conditions-de-travail.html">online dictionary</a>). This table gives information relative to working conditions. Only people aged 16 to 65 years old can be included in this dataset. The number of people from <code>df_personne</code> that are not found in <code>df_qst</code> is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df_personne <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_qst, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16848</code></pre>
</div>
</div>
<p>The economic and social situation of indidivuals is filled in <code>df_qes</code>. The number of individuals for whom no match is found is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_personne <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(df_qes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9936</code></pre>
</div>
</div>
<p>Lastly, we can look at the number of people for whom we do not have a match with social security data (SNIIRAM):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df_personne <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(data_sniiram, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11026</code></pre>
</div>
</div>
<p>Then, the tables can be merged into a single one. To that end, we should first create an ID for each individual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df_opinion_1 <span class="ot">&lt;-</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  df_opinion_1 <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_individual =</span> <span class="fu">str_c</span>(ben_n4, nind, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>df_qst <span class="ot">&lt;-</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  df_qst <span class="sc">|&gt;</span> </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_individual =</span> <span class="fu">str_c</span>(ben_n4, nind, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>df_qes <span class="ot">&lt;-</span> </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  df_qes <span class="sc">|&gt;</span> </span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_individual =</span> <span class="fu">str_c</span>(ben_n4, nind, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>data_sniiram <span class="ot">&lt;-</span> </span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  data_sniiram <span class="sc">|&gt;</span> </span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_individual =</span> <span class="fu">str_c</span>(ben_n4, nind, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>df_mutuelle_sans_redondance <span class="ot">&lt;-</span> </span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  df_mutuelle_sans_redondance <span class="sc">|&gt;</span> </span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nind =</span> <span class="fu">as.numeric</span>(nind)) <span class="sc">|&gt;</span> </span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_individual =</span> <span class="fu">str_c</span>(ben_n4, nind, <span class="at">sep =</span> <span class="st">"_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we merge the different tables together, we would like to keep track on whether each individual was included in the joined table. To that end,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Household characteristics</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  df_personne <span class="sc">|&gt;</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_menage) <span class="sc">|&gt;</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_individual =</span> <span class="fu">str_c</span>(ben_n4, nind, <span class="at">sep =</span> <span class="st">"_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(ben_n4)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opinion first wave</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_opinion_1, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>, <span class="st">"id_individual"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_in_df_opinion_1 =</span> id_individual <span class="sc">%in%</span> df_opinion_1<span class="sc">$</span>id_individual)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Working conditions</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_qst, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>, <span class="st">"id_individual"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_in_df_qst =</span> id_individual <span class="sc">%in%</span> df_qst<span class="sc">$</span>id_individual)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Economic and social situation</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df_qes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>, <span class="st">"id_individual"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_in_df_qes =</span> id_individual <span class="sc">%in%</span> df_qes<span class="sc">$</span>id_individual)</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Social Insurance</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_sniiram, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>, <span class="st">"id_individual"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_in_data_sniiram =</span> id_individual <span class="sc">%in%</span> data_sniiram<span class="sc">$</span>id_individual)</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Mutual Insurance</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>    df_mutuelle_sans_redondance,</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ben_n4"</span>, <span class="st">"nind"</span>, <span class="st">"id_individual"</span>)</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">is_in_df_mutuelle =</span> id_individual <span class="sc">%in%</span> </span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>      df_mutuelle_sans_redondance<span class="sc">$</span>id_individual</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us check (again) how many individuals were found in the different datasets:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>var_g <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"is_in_df_opinion_1"</span>, <span class="st">"is_in_df_qst"</span>, <span class="st">"is_in_df_qes"</span>, <span class="st">"is_in_data_sniiram"</span>, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"is_in_df_mutuelle"</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!!!</span><span class="fu">syms</span>(var_g)) <span class="sc">|&gt;</span> </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">everything</span>(), <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">sum</span>(.))) <span class="sc">|&gt;</span> </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Number of individuals present in the different parts "</span>,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"of the survey"</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">"Cambria"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Number of individuals present in the different parts of the survey</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_opinion_1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_qst</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_qes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_data_sniiram</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_mutuelle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">8413</td>
<td style="text-align: right;">6199</td>
<td style="text-align: right;">13111</td>
<td style="text-align: right;">12021</td>
<td style="text-align: right;">19941</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Corresponding proportions</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!!!</span><span class="fu">syms</span>(var_g)) <span class="sc">|&gt;</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">everything</span>(), <span class="at">.fns =</span> <span class="sc">~</span><span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">sum</span>(.) <span class="sc">/</span> <span class="fu">n</span>(), <span class="at">digits =</span> <span class="dv">2</span>))</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Proportion of individuals present in the different parts "</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"of the survey (in percent)"</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">|&gt;</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_classic</span>(<span class="at">full_width =</span> F, <span class="at">html_font =</span> <span class="st">"Cambria"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="lightable-classic caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Proportion of individuals present in the different parts of the survey (in percent)</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_opinion_1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_qst</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_qes</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_data_sniiram</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">is_in_df_mutuelle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">36.5</td>
<td style="text-align: right;">26.9</td>
<td style="text-align: right;">56.89</td>
<td style="text-align: right;">52.16</td>
<td style="text-align: right;">86.52</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Here are the dimensions of this table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23047   821</code></pre>
</div>
</div>
<p>If we want to work with regional aspects at some point, we can create a table which provides the correspondence between the survey data and INSEE data.</p>
<p>The map of French regions can be loaded:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"../data/map_regions_2014.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>regions_fr <span class="ot">&lt;-</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  map_regions_2014 <span class="sc">|&gt;</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_set_geometry</span>(<span class="cn">NULL</span>) <span class="sc">|&gt;</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(code_insee, nom)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The correspondence between the codes can be put on a table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>corresp_regions <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>MENAGE_region, <span class="sc">~</span>code_insee,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">11</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span>, <span class="dv">21</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span>, <span class="dv">22</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span>, <span class="dv">23</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span>, <span class="dv">24</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">6</span>, <span class="dv">25</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">7</span>, <span class="dv">26</span>,</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">8</span>, <span class="dv">31</span>,</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">9</span>, <span class="dv">41</span>,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span>, <span class="dv">42</span>,</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="dv">11</span>, <span class="dv">43</span>,</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">12</span>, <span class="dv">52</span>,</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">13</span>, <span class="dv">53</span>,</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">14</span>, <span class="dv">54</span>,</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">15</span>, <span class="dv">72</span>,</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">16</span>, <span class="dv">73</span>,</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">17</span>, <span class="dv">74</span>,</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">18</span>, <span class="dv">82</span>,</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">19</span>, <span class="dv">83</span>,</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">20</span>, <span class="dv">91</span>,</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">21</span>, <span class="dv">93</span>,</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">22</span>, <span class="dv">94</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>    regions_fr <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">code_insee =</span> <span class="fu">as.numeric</span>(code_insee)),</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"code_insee"</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can eventually add the sunlight data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    corresp_regions <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">MENAGE_region_nom =</span> nom),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"MENAGE_region"</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    ensol_regions <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">code_insee =</span> <span class="fu">as.numeric</span>(code_insee)),</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"code_insee"</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us keep track on the number of observation each time we filter out observations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>nb_obs_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">step =</span> <span class="st">"raw"</span>, <span class="at">n =</span> <span class="fu">nrow</span>(df))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We first remove individuals younger than 15 years old:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PERSONNE_age <span class="sc">&gt;=</span> <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>nb_obs_df <span class="ot">&lt;-</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  nb_obs_df <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">step =</span> <span class="st">"age_15"</span>, <span class="at">n =</span> <span class="fu">nrow</span>(df))</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>nb_obs_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  step       n
  &lt;chr&gt;  &lt;int&gt;
1 raw    23047
2 age_15 18561</code></pre>
</div>
</div>
</section>
<section id="correction-of-the-mhi-5-score" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="correction-of-the-mhi-5-score"><span class="header-section-number">1.2</span> Correction of the MHI-5 score</h2>
<p>One of the key variables of the dataset which is of interest for us is the MHI-5 score (see, <em>e.g.</em> <span class="citation" data-cites="hoeymans_measuring_2004">Hoeymans et al. (<a href="references.html#ref-hoeymans_measuring_2004" role="doc-biblioref">2004</a>)</span>, <span class="citation" data-cites="rumpf_screening_2001">Rumpf et al. (<a href="references.html#ref-rumpf_screening_2001" role="doc-biblioref">2001</a>)</span>, <span class="citation" data-cites="thorsen_predictive_2013">Thorsen et al. (<a href="references.html#ref-thorsen_predictive_2013" role="doc-biblioref">2013</a>)</span>). For somewhat reason, the score was incorrectly calculated. Traditionally, the MHI-5 score is calculated from the answers to five questions, each question containing 6 ordered answer items (<code>1 =</code> all of the time, <code>2 =</code>most of the time, <code>3 =</code> a good bit of time, <code>4 =</code> some of the time, <code>5 =</code> a little of the time, <code>6 =</code> none of the time). The MHI-5 score formula writes: <span class="math display">\[\text{MHI-5} = 100 \times \frac{\sum_{q=1}^{5} s_q - 5}{25},\]</span> where <span class="math inline">\(s_q\)</span> is the score of the <span class="math inline">\(q^{\text{th}}\)</span> question.</p>
<p>However, in the French version of the survey, the answer items are only 5 (because the translation of some items does not allow the same richness of nuance as English). To obtain a normalized score between 0 and 100, the formula shoud write: <span class="math display">\[\text{MHI-5} = 100 \times \frac{\sum_{q=1}^{5} s_q - 5}{\boldsymbol{20}}.\]</span></p>
<p>We therefore need to correct the MHI-5 score from the data, simply by multiplying it by 1.25:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PERSONNE_score_t_corrected =</span> PERSONNE_score_t <span class="sc">*</span> <span class="fl">1.25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#sec-MHI-Scores" class="quarto-xref"><span>Section 1.4</span></a> provides some codes to compute the MHI-5 score manually from the answers given to the questions that allow it to be calculated.</p>
</section>
<section id="data-formatting" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="data-formatting"><span class="header-section-number">1.3</span> Data formatting</h2>
<p>Qualitative variables have numerical levels in the original dataset. Consulting the data dictionary makes it possible to assign more comprehensible labels.</p>
<p>All the following variables are qualitative. We will adopt the following rules for variables from sub-parts of the survey:</p>
<ul>
<li>if the individual was included in the sub-part of the survey but did not respond, we will set the answer to “Not reported”</li>
<li>if the individual was not surveyed (was not part of the sub-part of the survey), we will set the answer to “Not surveyed”</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PERSONNE_pb_depress"</span>,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PERSONNE_etasante"</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"PERSONNE_statut"</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>      as.character</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_pb_depress =</span> <span class="fu">replace_na</span>(PERSONNE_pb_depress, <span class="st">"Not reported"</span>),</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_pb_depress =</span> <span class="fu">factor</span>(</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>      PERSONNE_pb_depress, </span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="st">"Not reported"</span>),</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No depression"</span>, <span class="st">"Depression"</span>, <span class="st">"Not reported"</span>)</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_etasante =</span> <span class="fu">replace_na</span>(PERSONNE_etasante, <span class="st">"Not reported"</span>),</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_etasante =</span> <span class="fu">factor</span>(</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>      PERSONNE_etasante,</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"Not reported"</span>),</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Very Good"</span>,</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Good"</span>,</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Fairly Good"</span>,</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bad"</span>,</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Very Bad"</span>,</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_etat_sante =</span> <span class="fu">case_when</span>(</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>      PERSONNE_etasante <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Very Good"</span>, <span class="st">"Good"</span>, <span class="st">"Fairly Good"</span></span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">~</span> <span class="st">"Very Good, Good or Fairly Good"</span>,</span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>      PERSONNE_etasante <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Bad"</span>, <span class="st">"Very Bad"</span>) <span class="sc">~</span> <span class="st">"Very Bad or Bad"</span>,</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>      PERSONNE_etasante <span class="sc">==</span> <span class="st">"Not reported"</span> <span class="sc">~</span> <span class="st">"Not reported"</span>,</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"other"</span></span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_asthm,</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_bronchit,</span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_infarctus,</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_coronair,</span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_hypertens,</span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_avc,</span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_arthros,</span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_lombalgi,</span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_cervical,</span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_diabet,</span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_allergi,</span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_cirrhos,</span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_urinair,</span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>        PERSONNE_pb_non</span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>      <span class="sc">~</span><span class="fu">factor</span>(</span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a>        <span class="fu">replace_na</span>(<span class="fu">as.character</span>(.x), <span class="st">"Not reported"</span>),</span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="st">"Not reported"</span>),</span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>, <span class="st">"Not reported"</span>)</span>
<span id="cb45-66"><a href="#cb45-66" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-67"><a href="#cb45-67" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-68"><a href="#cb45-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-69"><a href="#cb45-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-70"><a href="#cb45-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_sexe =</span> <span class="fu">factor</span>(</span>
<span id="cb45-71"><a href="#cb45-71" aria-hidden="true" tabindex="-1"></a>      PERSONNE_sexe, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>)</span>
<span id="cb45-72"><a href="#cb45-72" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-73"><a href="#cb45-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_couple =</span> <span class="fu">factor</span>(</span>
<span id="cb45-74"><a href="#cb45-74" aria-hidden="true" tabindex="-1"></a>      PERSONNE_couple, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>)</span>
<span id="cb45-75"><a href="#cb45-75" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-76"><a href="#cb45-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_etatleg =</span> <span class="fu">factor</span>(</span>
<span id="cb45-77"><a href="#cb45-77" aria-hidden="true" tabindex="-1"></a>      PERSONNE_etatleg, </span>
<span id="cb45-78"><a href="#cb45-78" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>),</span>
<span id="cb45-79"><a href="#cb45-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-80"><a href="#cb45-80" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Married, Civil Union"</span>, <span class="st">"Divorced, separated"</span>, <span class="st">"Widowed"</span>,</span>
<span id="cb45-81"><a href="#cb45-81" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Lives in a marriage or concubinage"</span>, <span class="st">"Single"</span>,</span>
<span id="cb45-82"><a href="#cb45-82" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Does not know"</span>, <span class="st">"Refuses to answer"</span></span>
<span id="cb45-83"><a href="#cb45-83" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-84"><a href="#cb45-84" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-85"><a href="#cb45-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_statut =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-86"><a href="#cb45-86" aria-hidden="true" tabindex="-1"></a>      PERSONNE_statut <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>), </span>
<span id="cb45-87"><a href="#cb45-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Public employee"</span>, </span>
<span id="cb45-88"><a href="#cb45-88" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> PERSONNE_statut</span>
<span id="cb45-89"><a href="#cb45-89" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-90"><a href="#cb45-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_statut =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-91"><a href="#cb45-91" aria-hidden="true" tabindex="-1"></a>      PERSONNE_statut <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>), </span>
<span id="cb45-92"><a href="#cb45-92" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Other"</span>, </span>
<span id="cb45-93"><a href="#cb45-93" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> PERSONNE_statut</span>
<span id="cb45-94"><a href="#cb45-94" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-95"><a href="#cb45-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_statut =</span> <span class="fu">replace_na</span>(PERSONNE_statut, <span class="st">"Not reported"</span>),</span>
<span id="cb45-96"><a href="#cb45-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_statut =</span> <span class="fu">factor</span>(</span>
<span id="cb45-97"><a href="#cb45-97" aria-hidden="true" tabindex="-1"></a>      PERSONNE_statut, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Public employee"</span>, <span class="dv">5</span>, <span class="st">"Other"</span>, <span class="st">"Not reported"</span>),</span>
<span id="cb45-98"><a href="#cb45-98" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Public employee"</span>,</span>
<span id="cb45-99"><a href="#cb45-99" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Private employee"</span>,</span>
<span id="cb45-100"><a href="#cb45-100" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Other"</span>,</span>
<span id="cb45-101"><a href="#cb45-101" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Not reported"</span>)</span>
<span id="cb45-102"><a href="#cb45-102" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-103"><a href="#cb45-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_ss =</span> <span class="fu">factor</span>(</span>
<span id="cb45-104"><a href="#cb45-104" aria-hidden="true" tabindex="-1"></a>      PERSONNE_ss, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb45-105"><a href="#cb45-105" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-106"><a href="#cb45-106" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (own)"</span>,</span>
<span id="cb45-107"><a href="#cb45-107" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes (third party)"</span>)</span>
<span id="cb45-108"><a href="#cb45-108" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-109"><a href="#cb45-109" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "Yes, because he/she works, or receives unemployment benefits, </span></span>
<span id="cb45-110"><a href="#cb45-110" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is a student, retired, widower of a pensioner, disabled, beneficiary of </span></span>
<span id="cb45-111"><a href="#cb45-111" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the basic CMU...",</span></span>
<span id="cb45-112"><a href="#cb45-112" aria-hidden="true" tabindex="-1"></a>    <span class="co"># "Yes, as the beneficiary of a person living in your household")),</span></span>
<span id="cb45-113"><a href="#cb45-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_regime =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-114"><a href="#cb45-114" aria-hidden="true" tabindex="-1"></a>      PERSONNE_regime <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>), </span>
<span id="cb45-115"><a href="#cb45-115" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Public service"</span>, </span>
<span id="cb45-116"><a href="#cb45-116" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> PERSONNE_regime</span>
<span id="cb45-117"><a href="#cb45-117" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-118"><a href="#cb45-118" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_regime =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-119"><a href="#cb45-119" aria-hidden="true" tabindex="-1"></a>      PERSONNE_regime <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>), </span>
<span id="cb45-120"><a href="#cb45-120" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Other (Student, abroad, other)"</span>, </span>
<span id="cb45-121"><a href="#cb45-121" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> PERSONNE_regime</span>
<span id="cb45-122"><a href="#cb45-122" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-123"><a href="#cb45-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_regime =</span> <span class="fu">factor</span>(</span>
<span id="cb45-124"><a href="#cb45-124" aria-hidden="true" tabindex="-1"></a>      PERSONNE_regime, </span>
<span id="cb45-125"><a href="#cb45-125" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb45-126"><a href="#cb45-126" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1</span>, <span class="st">"Public service"</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="st">"Other (Student, abroad, other)"</span>, <span class="dv">15</span></span>
<span id="cb45-127"><a href="#cb45-127" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb45-128"><a href="#cb45-128" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-129"><a href="#cb45-129" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The general scheme (Cnamts)"</span>,</span>
<span id="cb45-130"><a href="#cb45-130" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Public service"</span>,</span>
<span id="cb45-131"><a href="#cb45-131" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The local Alsace-Moselle scheme"</span>,</span>
<span id="cb45-132"><a href="#cb45-132" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The basic Universal Health Coverage"</span>,</span>
<span id="cb45-133"><a href="#cb45-133" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The agricultural scheme"</span>,</span>
<span id="cb45-134"><a href="#cb45-134" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The self-employed scheme"</span>,</span>
<span id="cb45-135"><a href="#cb45-135" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other (Student, abroad, other)"</span>,</span>
<span id="cb45-136"><a href="#cb45-136" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Does not know"</span></span>
<span id="cb45-137"><a href="#cb45-137" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-138"><a href="#cb45-138" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-139"><a href="#cb45-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_rap_pcs8 =</span> <span class="fu">factor</span>(</span>
<span id="cb45-140"><a href="#cb45-140" aria-hidden="true" tabindex="-1"></a>      PERSONNE_rap_pcs8,</span>
<span id="cb45-141"><a href="#cb45-141" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,</span>
<span id="cb45-142"><a href="#cb45-142" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-143"><a href="#cb45-143" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Farmer"</span>,</span>
<span id="cb45-144"><a href="#cb45-144" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Craftsman, trader"</span>,</span>
<span id="cb45-145"><a href="#cb45-145" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Executive and intellectual profession"</span>,</span>
<span id="cb45-146"><a href="#cb45-146" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Intermediate occupation"</span>,</span>
<span id="cb45-147"><a href="#cb45-147" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Administrative employee"</span>,</span>
<span id="cb45-148"><a href="#cb45-148" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Commercial employee"</span>,</span>
<span id="cb45-149"><a href="#cb45-149" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Skilled worker"</span>,</span>
<span id="cb45-150"><a href="#cb45-150" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Unskilled worker"</span>,</span>
<span id="cb45-151"><a href="#cb45-151" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Inactive having never worked"</span></span>
<span id="cb45-152"><a href="#cb45-152" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-153"><a href="#cb45-153" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-154"><a href="#cb45-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_ald =</span> <span class="fu">factor</span>(</span>
<span id="cb45-155"><a href="#cb45-155" aria-hidden="true" tabindex="-1"></a>      PERSONNE_ald, </span>
<span id="cb45-156"><a href="#cb45-156" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb45-157"><a href="#cb45-157" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Does not know"</span>)</span>
<span id="cb45-158"><a href="#cb45-158" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-159"><a href="#cb45-159" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-160"><a href="#cb45-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-161"><a href="#cb45-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_rap_typmen =</span> <span class="fu">factor</span>(</span>
<span id="cb45-162"><a href="#cb45-162" aria-hidden="true" tabindex="-1"></a>      MENAGE_rap_typmen,</span>
<span id="cb45-163"><a href="#cb45-163" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>),</span>
<span id="cb45-164"><a href="#cb45-164" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-165"><a href="#cb45-165" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Single person"</span>,</span>
<span id="cb45-166"><a href="#cb45-166" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Single-parent family"</span>,</span>
<span id="cb45-167"><a href="#cb45-167" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Couple without children"</span>,</span>
<span id="cb45-168"><a href="#cb45-168" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Couple with children"</span>,</span>
<span id="cb45-169"><a href="#cb45-169" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other"</span></span>
<span id="cb45-170"><a href="#cb45-170" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-171"><a href="#cb45-171" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-172"><a href="#cb45-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_region =</span> <span class="fu">as.character</span>(MENAGE_region),</span>
<span id="cb45-173"><a href="#cb45-173" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_region =</span> <span class="fu">factor</span>(</span>
<span id="cb45-174"><a href="#cb45-174" aria-hidden="true" tabindex="-1"></a>      MENAGE_region,</span>
<span id="cb45-175"><a href="#cb45-175" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">22</span>),</span>
<span id="cb45-176"><a href="#cb45-176" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-177"><a href="#cb45-177" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Région parisienne"</span>,</span>
<span id="cb45-178"><a href="#cb45-178" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Champagne-Ardenne"</span>,</span>
<span id="cb45-179"><a href="#cb45-179" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Picardie"</span>,</span>
<span id="cb45-180"><a href="#cb45-180" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Haute-Normandie"</span>,</span>
<span id="cb45-181"><a href="#cb45-181" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Centre"</span>,</span>
<span id="cb45-182"><a href="#cb45-182" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Basse-Normandie"</span>,</span>
<span id="cb45-183"><a href="#cb45-183" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bourgogne"</span>,</span>
<span id="cb45-184"><a href="#cb45-184" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Nord-Pas-de-Calais"</span>,</span>
<span id="cb45-185"><a href="#cb45-185" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Lorraine"</span>,</span>
<span id="cb45-186"><a href="#cb45-186" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Alsace"</span>,</span>
<span id="cb45-187"><a href="#cb45-187" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Franche-Comté"</span>,</span>
<span id="cb45-188"><a href="#cb45-188" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pays de la Loire"</span>,</span>
<span id="cb45-189"><a href="#cb45-189" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bretagne"</span>,</span>
<span id="cb45-190"><a href="#cb45-190" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Poitou-Charentes"</span>,</span>
<span id="cb45-191"><a href="#cb45-191" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Aquitaine"</span>,</span>
<span id="cb45-192"><a href="#cb45-192" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Midi-Pyrénées"</span>,</span>
<span id="cb45-193"><a href="#cb45-193" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Limousin"</span>,</span>
<span id="cb45-194"><a href="#cb45-194" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Rhône-Alpes"</span>,</span>
<span id="cb45-195"><a href="#cb45-195" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Auvergne"</span>,</span>
<span id="cb45-196"><a href="#cb45-196" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Languedoc-Roussillon"</span>,</span>
<span id="cb45-197"><a href="#cb45-197" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Provence-Alpes-Côte d'Azur"</span>,</span>
<span id="cb45-198"><a href="#cb45-198" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Corse"</span></span>
<span id="cb45-199"><a href="#cb45-199" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-200"><a href="#cb45-200" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-201"><a href="#cb45-201" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_revenu =</span> <span class="fu">factor</span>(</span>
<span id="cb45-202"><a href="#cb45-202" aria-hidden="true" tabindex="-1"></a>      MENAGE_revenu, </span>
<span id="cb45-203"><a href="#cb45-203" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">99</span>),</span>
<span id="cb45-204"><a href="#cb45-204" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-205"><a href="#cb45-205" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Does not know"</span>,</span>
<span id="cb45-206"><a href="#cb45-206" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&lt; 700"</span>,</span>
<span id="cb45-207"><a href="#cb45-207" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[700, 1000)"</span>,</span>
<span id="cb45-208"><a href="#cb45-208" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[1000, 1200)"</span>,</span>
<span id="cb45-209"><a href="#cb45-209" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[1200, 1500)"</span>,</span>
<span id="cb45-210"><a href="#cb45-210" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[1500, 1800)"</span>,</span>
<span id="cb45-211"><a href="#cb45-211" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[1800, 2200)"</span>,</span>
<span id="cb45-212"><a href="#cb45-212" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[2200, 2500)"</span>,</span>
<span id="cb45-213"><a href="#cb45-213" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[2500, 3000)"</span>,</span>
<span id="cb45-214"><a href="#cb45-214" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[3000, 3500)"</span>,</span>
<span id="cb45-215"><a href="#cb45-215" aria-hidden="true" tabindex="-1"></a>        <span class="st">"[3500, 4500)"</span>,</span>
<span id="cb45-216"><a href="#cb45-216" aria-hidden="true" tabindex="-1"></a>        <span class="st">"&gt;= 4500"</span>,</span>
<span id="cb45-217"><a href="#cb45-217" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Refuse to declare"</span>,</span>
<span id="cb45-218"><a href="#cb45-218" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Abandonment before 2nd contact "</span></span>
<span id="cb45-219"><a href="#cb45-219" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-220"><a href="#cb45-220" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-221"><a href="#cb45-221" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-222"><a href="#cb45-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-223"><a href="#cb45-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_assu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-224"><a href="#cb45-224" aria-hidden="true" tabindex="-1"></a>      MUTUELLE_assu <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), </span>
<span id="cb45-225"><a href="#cb45-225" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Beneficiary"</span>, </span>
<span id="cb45-226"><a href="#cb45-226" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MUTUELLE_assu</span>
<span id="cb45-227"><a href="#cb45-227" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-228"><a href="#cb45-228" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_assu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-229"><a href="#cb45-229" aria-hidden="true" tabindex="-1"></a>      is_in_df_mutuelle <span class="sc">&amp;</span> <span class="fu">is.na</span>(MUTUELLE_assu), </span>
<span id="cb45-230"><a href="#cb45-230" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-231"><a href="#cb45-231" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MUTUELLE_assu</span>
<span id="cb45-232"><a href="#cb45-232" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-233"><a href="#cb45-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_assu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-234"><a href="#cb45-234" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_mutuelle, </span>
<span id="cb45-235"><a href="#cb45-235" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-236"><a href="#cb45-236" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MUTUELLE_assu</span>
<span id="cb45-237"><a href="#cb45-237" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-238"><a href="#cb45-238" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_assu =</span> <span class="fu">factor</span>(</span>
<span id="cb45-239"><a href="#cb45-239" aria-hidden="true" tabindex="-1"></a>      MUTUELLE_assu,</span>
<span id="cb45-240"><a href="#cb45-240" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="st">"Beneficiary"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-241"><a href="#cb45-241" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-242"><a href="#cb45-242" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Does not know"</span>,</span>
<span id="cb45-243"><a href="#cb45-243" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Self insured"</span>,</span>
<span id="cb45-244"><a href="#cb45-244" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Beneficiary"</span>,</span>
<span id="cb45-245"><a href="#cb45-245" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>,</span>
<span id="cb45-246"><a href="#cb45-246" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not surveyed"</span></span>
<span id="cb45-247"><a href="#cb45-247" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-248"><a href="#cb45-248" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-249"><a href="#cb45-249" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-250"><a href="#cb45-250" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_typcc =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-251"><a href="#cb45-251" aria-hidden="true" tabindex="-1"></a>      is_in_df_mutuelle <span class="sc">&amp;</span> <span class="fu">is.na</span>(MUTUELLE_typcc), </span>
<span id="cb45-252"><a href="#cb45-252" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-253"><a href="#cb45-253" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MUTUELLE_typcc</span>
<span id="cb45-254"><a href="#cb45-254" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-255"><a href="#cb45-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_typcc =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-256"><a href="#cb45-256" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_mutuelle, </span>
<span id="cb45-257"><a href="#cb45-257" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-258"><a href="#cb45-258" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MUTUELLE_typcc),</span>
<span id="cb45-259"><a href="#cb45-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">MUTUELLE_typcc =</span> <span class="fu">factor</span>(</span>
<span id="cb45-260"><a href="#cb45-260" aria-hidden="true" tabindex="-1"></a>      MUTUELLE_typcc, </span>
<span id="cb45-261"><a href="#cb45-261" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-262"><a href="#cb45-262" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-263"><a href="#cb45-263" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Indefinite"</span>,</span>
<span id="cb45-264"><a href="#cb45-264" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Mutual insurance"</span>,</span>
<span id="cb45-265"><a href="#cb45-265" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pension fund"</span>,</span>
<span id="cb45-266"><a href="#cb45-266" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Private insurance"</span>,</span>
<span id="cb45-267"><a href="#cb45-267" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Insurance broker"</span>,</span>
<span id="cb45-268"><a href="#cb45-268" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>,</span>
<span id="cb45-269"><a href="#cb45-269" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not surveyed"</span></span>
<span id="cb45-270"><a href="#cb45-270" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-271"><a href="#cb45-271" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-272"><a href="#cb45-272" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-273"><a href="#cb45-273" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First wave answers to research questions</span></span>
<span id="cb45-274"><a href="#cb45-274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-275"><a href="#cb45-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_cons =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-276"><a href="#cb45-276" aria-hidden="true" tabindex="-1"></a>      is_in_df_opinion_1 <span class="sc">&amp;</span> <span class="fu">is.na</span>(OPINION1_renonc_cons),</span>
<span id="cb45-277"><a href="#cb45-277" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-278"><a href="#cb45-278" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_cons</span>
<span id="cb45-279"><a href="#cb45-279" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-280"><a href="#cb45-280" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_cons =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-281"><a href="#cb45-281" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_opinion_1,</span>
<span id="cb45-282"><a href="#cb45-282" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-283"><a href="#cb45-283" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_cons</span>
<span id="cb45-284"><a href="#cb45-284" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-285"><a href="#cb45-285" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_cons =</span> <span class="fu">factor</span>(</span>
<span id="cb45-286"><a href="#cb45-286" aria-hidden="true" tabindex="-1"></a>      OPINION1_renonc_cons,</span>
<span id="cb45-287"><a href="#cb45-287" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-288"><a href="#cb45-288" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-289"><a href="#cb45-289" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-290"><a href="#cb45-290" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-291"><a href="#cb45-291" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_dent =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-292"><a href="#cb45-292" aria-hidden="true" tabindex="-1"></a>      is_in_df_opinion_1 <span class="sc">&amp;</span> <span class="fu">is.na</span>(OPINION1_renonc_dent),</span>
<span id="cb45-293"><a href="#cb45-293" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-294"><a href="#cb45-294" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_dent</span>
<span id="cb45-295"><a href="#cb45-295" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-296"><a href="#cb45-296" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_dent =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-297"><a href="#cb45-297" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_opinion_1,</span>
<span id="cb45-298"><a href="#cb45-298" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-299"><a href="#cb45-299" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_dent</span>
<span id="cb45-300"><a href="#cb45-300" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-301"><a href="#cb45-301" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_dent =</span> <span class="fu">factor</span>(</span>
<span id="cb45-302"><a href="#cb45-302" aria-hidden="true" tabindex="-1"></a>      OPINION1_renonc_dent, </span>
<span id="cb45-303"><a href="#cb45-303" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-304"><a href="#cb45-304" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-305"><a href="#cb45-305" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-306"><a href="#cb45-306" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-307"><a href="#cb45-307" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_fin =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-308"><a href="#cb45-308" aria-hidden="true" tabindex="-1"></a>      is_in_df_opinion_1 <span class="sc">&amp;</span> <span class="fu">is.na</span>(OPINION1_renonc_fin),</span>
<span id="cb45-309"><a href="#cb45-309" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-310"><a href="#cb45-310" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_fin</span>
<span id="cb45-311"><a href="#cb45-311" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-312"><a href="#cb45-312" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_fin =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-313"><a href="#cb45-313" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_opinion_1,</span>
<span id="cb45-314"><a href="#cb45-314" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-315"><a href="#cb45-315" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_fin</span>
<span id="cb45-316"><a href="#cb45-316" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-317"><a href="#cb45-317" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_fin =</span> <span class="fu">factor</span>(</span>
<span id="cb45-318"><a href="#cb45-318" aria-hidden="true" tabindex="-1"></a>      OPINION1_renonc_fin, </span>
<span id="cb45-319"><a href="#cb45-319" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-320"><a href="#cb45-320" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-321"><a href="#cb45-321" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-322"><a href="#cb45-322" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-323"><a href="#cb45-323" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_loin =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-324"><a href="#cb45-324" aria-hidden="true" tabindex="-1"></a>      is_in_df_opinion_1 <span class="sc">&amp;</span> <span class="fu">is.na</span>(OPINION1_renonc_loin),</span>
<span id="cb45-325"><a href="#cb45-325" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>,</span>
<span id="cb45-326"><a href="#cb45-326" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_loin</span>
<span id="cb45-327"><a href="#cb45-327" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-328"><a href="#cb45-328" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_loin =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-329"><a href="#cb45-329" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_opinion_1,</span>
<span id="cb45-330"><a href="#cb45-330" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-331"><a href="#cb45-331" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_loin</span>
<span id="cb45-332"><a href="#cb45-332" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-333"><a href="#cb45-333" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_loin =</span> <span class="fu">factor</span>(</span>
<span id="cb45-334"><a href="#cb45-334" aria-hidden="true" tabindex="-1"></a>      OPINION1_renonc_loin, </span>
<span id="cb45-335"><a href="#cb45-335" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-336"><a href="#cb45-336" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-337"><a href="#cb45-337" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-338"><a href="#cb45-338" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-339"><a href="#cb45-339" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_long =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-340"><a href="#cb45-340" aria-hidden="true" tabindex="-1"></a>      is_in_df_opinion_1 <span class="sc">&amp;</span> <span class="fu">is.na</span>(OPINION1_renonc_long),</span>
<span id="cb45-341"><a href="#cb45-341" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-342"><a href="#cb45-342" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> OPINION1_renonc_long</span>
<span id="cb45-343"><a href="#cb45-343" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-344"><a href="#cb45-344" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_long =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>is_in_df_opinion_1,</span>
<span id="cb45-345"><a href="#cb45-345" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-346"><a href="#cb45-346" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">no =</span> OPINION1_renonc_long</span>
<span id="cb45-347"><a href="#cb45-347" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-348"><a href="#cb45-348" aria-hidden="true" tabindex="-1"></a>    <span class="at">OPINION1_renonc_long =</span> <span class="fu">factor</span>(</span>
<span id="cb45-349"><a href="#cb45-349" aria-hidden="true" tabindex="-1"></a>      OPINION1_renonc_long,</span>
<span id="cb45-350"><a href="#cb45-350" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-351"><a href="#cb45-351" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-352"><a href="#cb45-352" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-353"><a href="#cb45-353" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-354"><a href="#cb45-354" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Working conditions</span></span>
<span id="cb45-355"><a href="#cb45-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-356"><a href="#cb45-356" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_depech =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-357"><a href="#cb45-357" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_depech),</span>
<span id="cb45-358"><a href="#cb45-358" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-359"><a href="#cb45-359" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_depech</span>
<span id="cb45-360"><a href="#cb45-360" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-361"><a href="#cb45-361" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_depech =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-362"><a href="#cb45-362" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-363"><a href="#cb45-363" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-364"><a href="#cb45-364" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_depech</span>
<span id="cb45-365"><a href="#cb45-365" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-366"><a href="#cb45-366" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_depech =</span> <span class="fu">factor</span>(</span>
<span id="cb45-367"><a href="#cb45-367" aria-hidden="true" tabindex="-1"></a>      QST_ct_depech, </span>
<span id="cb45-368"><a href="#cb45-368" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-369"><a href="#cb45-369" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-370"><a href="#cb45-370" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-371"><a href="#cb45-371" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-372"><a href="#cb45-372" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-373"><a href="#cb45-373" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-374"><a href="#cb45-374" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_liberte =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-375"><a href="#cb45-375" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_liberte),</span>
<span id="cb45-376"><a href="#cb45-376" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-377"><a href="#cb45-377" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_liberte</span>
<span id="cb45-378"><a href="#cb45-378" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-379"><a href="#cb45-379" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_liberte =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-380"><a href="#cb45-380" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-381"><a href="#cb45-381" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-382"><a href="#cb45-382" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_liberte</span>
<span id="cb45-383"><a href="#cb45-383" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-384"><a href="#cb45-384" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_liberte =</span> <span class="fu">factor</span>(</span>
<span id="cb45-385"><a href="#cb45-385" aria-hidden="true" tabindex="-1"></a>      QST_ct_liberte, </span>
<span id="cb45-386"><a href="#cb45-386" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-387"><a href="#cb45-387" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-388"><a href="#cb45-388" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-389"><a href="#cb45-389" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-390"><a href="#cb45-390" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-391"><a href="#cb45-391" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-392"><a href="#cb45-392" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_apprend =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-393"><a href="#cb45-393" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_apprend),</span>
<span id="cb45-394"><a href="#cb45-394" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-395"><a href="#cb45-395" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_apprend</span>
<span id="cb45-396"><a href="#cb45-396" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-397"><a href="#cb45-397" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_apprend =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-398"><a href="#cb45-398" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-399"><a href="#cb45-399" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>,</span>
<span id="cb45-400"><a href="#cb45-400" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_apprend</span>
<span id="cb45-401"><a href="#cb45-401" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-402"><a href="#cb45-402" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_apprend =</span> <span class="fu">factor</span>(</span>
<span id="cb45-403"><a href="#cb45-403" aria-hidden="true" tabindex="-1"></a>      QST_ct_apprend, </span>
<span id="cb45-404"><a href="#cb45-404" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-405"><a href="#cb45-405" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-406"><a href="#cb45-406" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-407"><a href="#cb45-407" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-408"><a href="#cb45-408" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-409"><a href="#cb45-409" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-410"><a href="#cb45-410" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_aidecol =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-411"><a href="#cb45-411" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_aidecol),</span>
<span id="cb45-412"><a href="#cb45-412" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-413"><a href="#cb45-413" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_aidecol</span>
<span id="cb45-414"><a href="#cb45-414" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-415"><a href="#cb45-415" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_aidecol =</span> <span class="fu">ifelse</span>(<span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-416"><a href="#cb45-416" aria-hidden="true" tabindex="-1"></a>                            <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-417"><a href="#cb45-417" aria-hidden="true" tabindex="-1"></a>                            <span class="at">no =</span> QST_ct_aidecol</span>
<span id="cb45-418"><a href="#cb45-418" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-419"><a href="#cb45-419" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_aidecol =</span> <span class="fu">factor</span>(</span>
<span id="cb45-420"><a href="#cb45-420" aria-hidden="true" tabindex="-1"></a>      QST_ct_aidecol, </span>
<span id="cb45-421"><a href="#cb45-421" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-422"><a href="#cb45-422" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-423"><a href="#cb45-423" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, <span class="st">"Not concered"</span>, </span>
<span id="cb45-424"><a href="#cb45-424" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-425"><a href="#cb45-425" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-426"><a href="#cb45-426" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-427"><a href="#cb45-427" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_travnuit =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-428"><a href="#cb45-428" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_travnuit),</span>
<span id="cb45-429"><a href="#cb45-429" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-430"><a href="#cb45-430" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_travnuit</span>
<span id="cb45-431"><a href="#cb45-431" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-432"><a href="#cb45-432" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_travnuit =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-433"><a href="#cb45-433" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-434"><a href="#cb45-434" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-435"><a href="#cb45-435" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_travnuit</span>
<span id="cb45-436"><a href="#cb45-436" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-437"><a href="#cb45-437" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_travnuit =</span> <span class="fu">factor</span>(</span>
<span id="cb45-438"><a href="#cb45-438" aria-hidden="true" tabindex="-1"></a>      QST_ct_travnuit, </span>
<span id="cb45-439"><a href="#cb45-439" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-440"><a href="#cb45-440" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-441"><a href="#cb45-441" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, </span>
<span id="cb45-442"><a href="#cb45-442" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-443"><a href="#cb45-443" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-444"><a href="#cb45-444" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-445"><a href="#cb45-445" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-446"><a href="#cb45-446" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_repet =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-447"><a href="#cb45-447" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_repet),</span>
<span id="cb45-448"><a href="#cb45-448" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-449"><a href="#cb45-449" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_repet</span>
<span id="cb45-450"><a href="#cb45-450" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-451"><a href="#cb45-451" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_repet =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-452"><a href="#cb45-452" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-453"><a href="#cb45-453" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-454"><a href="#cb45-454" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_repet</span>
<span id="cb45-455"><a href="#cb45-455" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-456"><a href="#cb45-456" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_repet =</span> <span class="fu">factor</span>(</span>
<span id="cb45-457"><a href="#cb45-457" aria-hidden="true" tabindex="-1"></a>      QST_ct_repet, </span>
<span id="cb45-458"><a href="#cb45-458" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-459"><a href="#cb45-459" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-460"><a href="#cb45-460" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, </span>
<span id="cb45-461"><a href="#cb45-461" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-462"><a href="#cb45-462" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-463"><a href="#cb45-463" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-464"><a href="#cb45-464" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-465"><a href="#cb45-465" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_lourd =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-466"><a href="#cb45-466" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_lourd),</span>
<span id="cb45-467"><a href="#cb45-467" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-468"><a href="#cb45-468" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_lourd</span>
<span id="cb45-469"><a href="#cb45-469" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-470"><a href="#cb45-470" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_lourd =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-471"><a href="#cb45-471" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-472"><a href="#cb45-472" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-473"><a href="#cb45-473" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_lourd</span>
<span id="cb45-474"><a href="#cb45-474" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-475"><a href="#cb45-475" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_lourd =</span> <span class="fu">factor</span>(</span>
<span id="cb45-476"><a href="#cb45-476" aria-hidden="true" tabindex="-1"></a>      QST_ct_lourd, </span>
<span id="cb45-477"><a href="#cb45-477" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-478"><a href="#cb45-478" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-479"><a href="#cb45-479" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, </span>
<span id="cb45-480"><a href="#cb45-480" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-481"><a href="#cb45-481" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-482"><a href="#cb45-482" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-483"><a href="#cb45-483" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-484"><a href="#cb45-484" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_posture =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-485"><a href="#cb45-485" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_posture),</span>
<span id="cb45-486"><a href="#cb45-486" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-487"><a href="#cb45-487" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_posture</span>
<span id="cb45-488"><a href="#cb45-488" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-489"><a href="#cb45-489" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_posture =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-490"><a href="#cb45-490" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-491"><a href="#cb45-491" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-492"><a href="#cb45-492" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_posture</span>
<span id="cb45-493"><a href="#cb45-493" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-494"><a href="#cb45-494" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_posture =</span> <span class="fu">factor</span>(</span>
<span id="cb45-495"><a href="#cb45-495" aria-hidden="true" tabindex="-1"></a>      QST_ct_posture, </span>
<span id="cb45-496"><a href="#cb45-496" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-497"><a href="#cb45-497" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-498"><a href="#cb45-498" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, </span>
<span id="cb45-499"><a href="#cb45-499" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-500"><a href="#cb45-500" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-501"><a href="#cb45-501" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-502"><a href="#cb45-502" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-503"><a href="#cb45-503" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_produit =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-504"><a href="#cb45-504" aria-hidden="true" tabindex="-1"></a>      is_in_df_qst <span class="sc">&amp;</span> <span class="fu">is.na</span>(QST_ct_produit),</span>
<span id="cb45-505"><a href="#cb45-505" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-506"><a href="#cb45-506" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_produit</span>
<span id="cb45-507"><a href="#cb45-507" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-508"><a href="#cb45-508" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_produit =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-509"><a href="#cb45-509" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qst,</span>
<span id="cb45-510"><a href="#cb45-510" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-511"><a href="#cb45-511" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QST_ct_produit</span>
<span id="cb45-512"><a href="#cb45-512" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-513"><a href="#cb45-513" aria-hidden="true" tabindex="-1"></a>    <span class="at">QST_ct_produit =</span> <span class="fu">factor</span>(</span>
<span id="cb45-514"><a href="#cb45-514" aria-hidden="true" tabindex="-1"></a>      QST_ct_produit, </span>
<span id="cb45-515"><a href="#cb45-515" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-516"><a href="#cb45-516" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-517"><a href="#cb45-517" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>, <span class="st">"Never"</span>, </span>
<span id="cb45-518"><a href="#cb45-518" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-519"><a href="#cb45-519" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-520"><a href="#cb45-520" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-521"><a href="#cb45-521" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-522"><a href="#cb45-522" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Economic and social situation</span></span>
<span id="cb45-523"><a href="#cb45-523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-524"><a href="#cb45-524" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_association =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-525"><a href="#cb45-525" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_association),</span>
<span id="cb45-526"><a href="#cb45-526" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-527"><a href="#cb45-527" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_association</span>
<span id="cb45-528"><a href="#cb45-528" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-529"><a href="#cb45-529" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_association =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-530"><a href="#cb45-530" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-531"><a href="#cb45-531" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-532"><a href="#cb45-532" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_association</span>
<span id="cb45-533"><a href="#cb45-533" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-534"><a href="#cb45-534" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_association =</span> <span class="fu">factor</span>(</span>
<span id="cb45-535"><a href="#cb45-535" aria-hidden="true" tabindex="-1"></a>      QES_association, </span>
<span id="cb45-536"><a href="#cb45-536" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-537"><a href="#cb45-537" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-538"><a href="#cb45-538" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-539"><a href="#cb45-539" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-540"><a href="#cb45-540" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsami =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-541"><a href="#cb45-541" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_tpsami),</span>
<span id="cb45-542"><a href="#cb45-542" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-543"><a href="#cb45-543" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpsami</span>
<span id="cb45-544"><a href="#cb45-544" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-545"><a href="#cb45-545" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsami =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-546"><a href="#cb45-546" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-547"><a href="#cb45-547" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-548"><a href="#cb45-548" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpsami</span>
<span id="cb45-549"><a href="#cb45-549" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-550"><a href="#cb45-550" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsami =</span> <span class="fu">factor</span>(</span>
<span id="cb45-551"><a href="#cb45-551" aria-hidden="true" tabindex="-1"></a>      QES_tpsami, </span>
<span id="cb45-552"><a href="#cb45-552" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-553"><a href="#cb45-553" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-554"><a href="#cb45-554" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Every day or almost every day"</span>,</span>
<span id="cb45-555"><a href="#cb45-555" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a week"</span>,</span>
<span id="cb45-556"><a href="#cb45-556" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a month"</span>,</span>
<span id="cb45-557"><a href="#cb45-557" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Less than once a month"</span>,</span>
<span id="cb45-558"><a href="#cb45-558" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Never"</span>,</span>
<span id="cb45-559"><a href="#cb45-559" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-560"><a href="#cb45-560" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-561"><a href="#cb45-561" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-562"><a href="#cb45-562" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-563"><a href="#cb45-563" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsasso =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-564"><a href="#cb45-564" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_tpsasso),</span>
<span id="cb45-565"><a href="#cb45-565" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-566"><a href="#cb45-566" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpsasso</span>
<span id="cb45-567"><a href="#cb45-567" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-568"><a href="#cb45-568" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsasso =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-569"><a href="#cb45-569" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-570"><a href="#cb45-570" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-571"><a href="#cb45-571" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpsasso</span>
<span id="cb45-572"><a href="#cb45-572" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-573"><a href="#cb45-573" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsasso =</span> <span class="fu">factor</span>(</span>
<span id="cb45-574"><a href="#cb45-574" aria-hidden="true" tabindex="-1"></a>      QES_tpsasso, </span>
<span id="cb45-575"><a href="#cb45-575" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-576"><a href="#cb45-576" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-577"><a href="#cb45-577" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Every day or almost every day"</span>,</span>
<span id="cb45-578"><a href="#cb45-578" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a week"</span>,</span>
<span id="cb45-579"><a href="#cb45-579" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a month"</span>,</span>
<span id="cb45-580"><a href="#cb45-580" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Less than once a month"</span>,</span>
<span id="cb45-581"><a href="#cb45-581" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Never"</span>,</span>
<span id="cb45-582"><a href="#cb45-582" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-583"><a href="#cb45-583" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-584"><a href="#cb45-584" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-585"><a href="#cb45-585" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-586"><a href="#cb45-586" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpscolleg =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-587"><a href="#cb45-587" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_tpscolleg),</span>
<span id="cb45-588"><a href="#cb45-588" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-589"><a href="#cb45-589" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpscolleg</span>
<span id="cb45-590"><a href="#cb45-590" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-591"><a href="#cb45-591" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpscolleg =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-592"><a href="#cb45-592" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-593"><a href="#cb45-593" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-594"><a href="#cb45-594" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpscolleg</span>
<span id="cb45-595"><a href="#cb45-595" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-596"><a href="#cb45-596" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpscolleg =</span> <span class="fu">factor</span>(</span>
<span id="cb45-597"><a href="#cb45-597" aria-hidden="true" tabindex="-1"></a>      QES_tpscolleg, </span>
<span id="cb45-598"><a href="#cb45-598" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-599"><a href="#cb45-599" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-600"><a href="#cb45-600" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Every day or almost every day"</span>,</span>
<span id="cb45-601"><a href="#cb45-601" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a week"</span>,</span>
<span id="cb45-602"><a href="#cb45-602" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a month"</span>,</span>
<span id="cb45-603"><a href="#cb45-603" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Less than once a month"</span>,</span>
<span id="cb45-604"><a href="#cb45-604" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Never"</span>,</span>
<span id="cb45-605"><a href="#cb45-605" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-606"><a href="#cb45-606" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-607"><a href="#cb45-607" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-608"><a href="#cb45-608" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-609"><a href="#cb45-609" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsfamil =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-610"><a href="#cb45-610" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_tpsfamil),</span>
<span id="cb45-611"><a href="#cb45-611" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-612"><a href="#cb45-612" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpsfamil</span>
<span id="cb45-613"><a href="#cb45-613" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-614"><a href="#cb45-614" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsfamil =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-615"><a href="#cb45-615" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-616"><a href="#cb45-616" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-617"><a href="#cb45-617" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_tpsfamil</span>
<span id="cb45-618"><a href="#cb45-618" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-619"><a href="#cb45-619" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_tpsfamil =</span> <span class="fu">factor</span>(</span>
<span id="cb45-620"><a href="#cb45-620" aria-hidden="true" tabindex="-1"></a>      QES_tpsfamil,</span>
<span id="cb45-621"><a href="#cb45-621" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-622"><a href="#cb45-622" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-623"><a href="#cb45-623" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Every day or almost every day"</span>,</span>
<span id="cb45-624"><a href="#cb45-624" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a week"</span>,</span>
<span id="cb45-625"><a href="#cb45-625" aria-hidden="true" tabindex="-1"></a>        <span class="st">"At least once a month"</span>,</span>
<span id="cb45-626"><a href="#cb45-626" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Less than once a month"</span>,</span>
<span id="cb45-627"><a href="#cb45-627" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Never"</span>,</span>
<span id="cb45-628"><a href="#cb45-628" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-629"><a href="#cb45-629" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-630"><a href="#cb45-630" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-631"><a href="#cb45-631" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb45-632"><a href="#cb45-632" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_mere_etude =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-633"><a href="#cb45-633" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_mere_etude),</span>
<span id="cb45-634"><a href="#cb45-634" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-635"><a href="#cb45-635" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_mere_etude</span>
<span id="cb45-636"><a href="#cb45-636" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-637"><a href="#cb45-637" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_mere_etude =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-638"><a href="#cb45-638" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-639"><a href="#cb45-639" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-640"><a href="#cb45-640" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_mere_etude</span>
<span id="cb45-641"><a href="#cb45-641" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-642"><a href="#cb45-642" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_mere_etude =</span> <span class="fu">factor</span>(</span>
<span id="cb45-643"><a href="#cb45-643" aria-hidden="true" tabindex="-1"></a>      QES_mere_etude,</span>
<span id="cb45-644"><a href="#cb45-644" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-645"><a href="#cb45-645" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-646"><a href="#cb45-646" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Never Been to School"</span>,</span>
<span id="cb45-647"><a href="#cb45-647" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Nursery School, Primary school, Certificate of studies"</span>,</span>
<span id="cb45-648"><a href="#cb45-648" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1st cycle (~Middle School)"</span>,</span>
<span id="cb45-649"><a href="#cb45-649" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2nd cycle (~High School"</span>,</span>
<span id="cb45-650"><a href="#cb45-650" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Higher Education"</span>,</span>
<span id="cb45-651"><a href="#cb45-651" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other"</span>,</span>
<span id="cb45-652"><a href="#cb45-652" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Does not know"</span>,</span>
<span id="cb45-653"><a href="#cb45-653" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-654"><a href="#cb45-654" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-655"><a href="#cb45-655" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-656"><a href="#cb45-656" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_pere_etude =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-657"><a href="#cb45-657" aria-hidden="true" tabindex="-1"></a>      is_in_df_qes <span class="sc">&amp;</span> <span class="fu">is.na</span>(QES_pere_etude),</span>
<span id="cb45-658"><a href="#cb45-658" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-659"><a href="#cb45-659" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_pere_etude</span>
<span id="cb45-660"><a href="#cb45-660" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-661"><a href="#cb45-661" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_pere_etude =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-662"><a href="#cb45-662" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_qes,</span>
<span id="cb45-663"><a href="#cb45-663" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-664"><a href="#cb45-664" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> QES_pere_etude</span>
<span id="cb45-665"><a href="#cb45-665" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-666"><a href="#cb45-666" aria-hidden="true" tabindex="-1"></a>    <span class="at">QES_pere_etude =</span> <span class="fu">factor</span>(</span>
<span id="cb45-667"><a href="#cb45-667" aria-hidden="true" tabindex="-1"></a>      QES_pere_etude,</span>
<span id="cb45-668"><a href="#cb45-668" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-669"><a href="#cb45-669" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb45-670"><a href="#cb45-670" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Never Been to School"</span>,</span>
<span id="cb45-671"><a href="#cb45-671" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Nursery School, Primary school, Certificate of studies"</span>,</span>
<span id="cb45-672"><a href="#cb45-672" aria-hidden="true" tabindex="-1"></a>        <span class="st">"1st cycle (~Middle School)"</span>,</span>
<span id="cb45-673"><a href="#cb45-673" aria-hidden="true" tabindex="-1"></a>        <span class="st">"2nd cycle (~High School"</span>,</span>
<span id="cb45-674"><a href="#cb45-674" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Higher Education"</span>,</span>
<span id="cb45-675"><a href="#cb45-675" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other"</span>,</span>
<span id="cb45-676"><a href="#cb45-676" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Does not know"</span>,</span>
<span id="cb45-677"><a href="#cb45-677" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span></span>
<span id="cb45-678"><a href="#cb45-678" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb45-679"><a href="#cb45-679" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb45-680"><a href="#cb45-680" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb45-681"><a href="#cb45-681" aria-hidden="true" tabindex="-1"></a>  <span class="co"># SNIIRAM</span></span>
<span id="cb45-682"><a href="#cb45-682" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-683"><a href="#cb45-683" aria-hidden="true" tabindex="-1"></a>    <span class="at">SOINS_ald_am =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-684"><a href="#cb45-684" aria-hidden="true" tabindex="-1"></a>      is_in_data_sniiram <span class="sc">&amp;</span> <span class="fu">is.na</span>(SOINS_ald_am), </span>
<span id="cb45-685"><a href="#cb45-685" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb45-686"><a href="#cb45-686" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> SOINS_ald_am)</span>
<span id="cb45-687"><a href="#cb45-687" aria-hidden="true" tabindex="-1"></a>    ,</span>
<span id="cb45-688"><a href="#cb45-688" aria-hidden="true" tabindex="-1"></a>    <span class="at">SOINS_ald_am =</span> <span class="fu">ifelse</span>(</span>
<span id="cb45-689"><a href="#cb45-689" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_data_sniiram, </span>
<span id="cb45-690"><a href="#cb45-690" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, </span>
<span id="cb45-691"><a href="#cb45-691" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> SOINS_ald_am</span>
<span id="cb45-692"><a href="#cb45-692" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-693"><a href="#cb45-693" aria-hidden="true" tabindex="-1"></a>    <span class="at">SOINS_ald_am =</span> <span class="fu">factor</span>(</span>
<span id="cb45-694"><a href="#cb45-694" aria-hidden="true" tabindex="-1"></a>      SOINS_ald_am, </span>
<span id="cb45-695"><a href="#cb45-695" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>),</span>
<span id="cb45-696"><a href="#cb45-696" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"Not reported"</span>, <span class="st">"Not surveyed"</span>)</span>
<span id="cb45-697"><a href="#cb45-697" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-698"><a href="#cb45-698" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The same can be done for ordered qualitative variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>      MENAGE_tu <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="at">yes =</span> <span class="st">"Small Municipality"</span>, <span class="at">no =</span> MENAGE_tu</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>      MENAGE_tu <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="at">yes =</span> <span class="st">"Medium Municipality"</span>, <span class="at">no =</span> MENAGE_tu</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>      MENAGE_tu <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>), <span class="at">yes =</span> <span class="st">"Large Municipality"</span>, <span class="at">no =</span> MENAGE_tu</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>      MENAGE_tu <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">8</span>), <span class="at">yes =</span> <span class="st">"Paris metropolitan area"</span>, <span class="at">no =</span> MENAGE_tu</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>      is_in_df_mutuelle <span class="sc">&amp;</span> <span class="fu">is.na</span>(MENAGE_tu), <span class="at">yes =</span> <span class="st">"Not reported"</span>, <span class="at">no =</span> MENAGE_tu</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_mutuelle, <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, <span class="at">no =</span> MENAGE_tu</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_tu =</span> <span class="fu">factor</span>(</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>      MENAGE_tu,</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Small Municipality"</span>,</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Medium Municipality"</span>,</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Large Municipality"</span>,</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Paris metropolitan area"</span>,</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>,</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not surveyed"</span>), </span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_rap_zau =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>      MENAGE_rap_zau <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Major urban cluster (and its crown)"</span>,</span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MENAGE_rap_zau</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_rap_zau =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>      MENAGE_rap_zau <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>),</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Medium/small urban cluster (and its crown)"</span>,</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MENAGE_rap_zau</span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_rap_zau =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>      is_in_df_mutuelle <span class="sc">&amp;</span> <span class="fu">is.na</span>(MENAGE_rap_zau), </span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>, </span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> MENAGE_rap_zau</span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_rap_zau =</span> <span class="fu">ifelse</span>(</span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>is_in_df_mutuelle, <span class="at">yes =</span> <span class="st">"Not surveyed"</span>, <span class="at">no =</span> MENAGE_rap_zau),</span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">MENAGE_rap_zau =</span> <span class="fu">factor</span>(</span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>      MENAGE_rap_zau,</span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(</span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Major urban cluster (and its crown)"</span>,</span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Medium/small urban cluster (and its crown)"</span>,</span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a>        <span class="dv">5</span>,</span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>,</span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not surveyed"</span></span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Major urban cluster (and its crown)"</span>,</span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Medium/small urban cluster (and its crown)"</span>,</span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Spaces outside the area of influence of cities"</span>,</span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not reported"</span>,</span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Not surveyed"</span></span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a>      ), <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us make the an assumption regarding the variable <code>PERSONNE_couple</code>. This variable has missing values.</p>
<ol type="1">
<li>for all individuals younger than 15 (this question was not asked to people <span class="math inline">\(\leq\)</span> 15). We assume here that people 15 for which the value of the variable <code>PERSONNE_couple</code> is missing are actually not living as a couple.</li>
<li>for individuals older than 15 and living alone, we consider, if they have missing value for <code>PERSONNE_couple</code> that tey are not living as a couple.</li>
<li>for other individuals: we assign then the value <code>Not reported</code>.</li>
</ol>
<p>The number of individuals in the first case (15 years old and missing value for <code>PERSONNE_couple</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> <span class="fu">filter</span>(PERSONNE_age <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PERSONNE_couple) <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(PERSONNE_couple))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
# Groups:   PERSONNE_couple [1]
  PERSONNE_couple     n
  &lt;fct&gt;           &lt;int&gt;
1 &lt;NA&gt;              292</code></pre>
</div>
</div>
<p>The number of individuals in the second case (&gt;15 years old, living alone, and missing value for <code>PERSONNE_couple</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PERSONNE_age <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> MENAGE_nbpers <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PERSONNE_couple) <span class="sc">|&gt;</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(PERSONNE_couple))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
# Groups:   PERSONNE_couple [1]
  PERSONNE_couple     n
  &lt;fct&gt;           &lt;int&gt;
1 &lt;NA&gt;             1502</code></pre>
</div>
</div>
<p>The number of individuals in the third case (remaining people with missing value for <code>PERSONNE_couple</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((PERSONNE_age <span class="sc">&gt;</span> <span class="dv">15</span> <span class="sc">&amp;</span> MENAGE_nbpers <span class="sc">!=</span> <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PERSONNE_couple) <span class="sc">|&gt;</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(PERSONNE_couple))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
# Groups:   PERSONNE_couple [1]
  PERSONNE_couple     n
  &lt;fct&gt;           &lt;int&gt;
1 &lt;NA&gt;               53</code></pre>
</div>
</div>
<p>Let us make the changes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Recode NA as "Not reported"</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_couple =</span> <span class="fu">ifelse</span>(</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(PERSONNE_couple),</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"Not reported"</span>,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> <span class="fu">as.character</span>(PERSONNE_couple)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If the "couple" variable is "NA" and either lives alone or is 15yo: not in a couple</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_couple =</span> <span class="fu">ifelse</span>(</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">test =</span> PERSONNE_couple <span class="sc">==</span> <span class="st">"Not reported"</span> <span class="sc">&amp;</span> </span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>        (MENAGE_nbpers <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> PERSONNE_age <span class="sc">==</span> <span class="dv">15</span>),</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"No"</span>,</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> PERSONNE_couple)</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-MHI-Scores" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="sec-MHI-Scores"><span class="header-section-number">1.4</span> Computing manually the MHI Scores</h2>
<p>As we noticed the MHI-Score is miscalculated in the ESPS data, we decided to compute it from scratch.</p>
<p>Some individuals did not answer all the questions required to construct the MHI-5 and MHI-3 scores (for more details on MHI-3, please refer to <span class="citation" data-cites="yamazaki_usefulness_2005">Yamazaki, Fukuhara, and Green (<a href="references.html#ref-yamazaki_usefulness_2005" role="doc-biblioref">2005</a>)</span>). As described in the literature, to construct the MHI-5 score, missing values are imputed provided that individuals answered at least 3 of the 5 questions. The imputed value is the average of the responses given.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PERSONNE_score_t_corrected =</span> PERSONNE_score_t <span class="sc">*</span> <span class="fl">1.25</span>) <span class="sc">|&gt;</span> </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Some variables (PERSONNE_calme and PERSONNE_heureux) need to be adjusted</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_nerveux =</span> PERSONNE_nerveu,</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_calme =</span> <span class="dv">6</span> <span class="sc">-</span> PERSONNE_calme,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_triste =</span> PERSONNE_triste,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_heureux =</span> <span class="dv">6</span> <span class="sc">-</span> PERSONNE_heureux,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_decourage =</span> PERSONNE_decourag</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Counting the number of missing values for each respondant</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">nb_na_mhi =</span> (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_nerveux)) <span class="sc">+</span> </span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_calme)) <span class="sc">+</span> </span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_triste)) <span class="sc">+</span> </span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_heureux)) <span class="sc">+</span> </span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_decourage))</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">nb_na_mhi_3 =</span> (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_triste)) <span class="sc">+</span> </span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_heureux)) <span class="sc">+</span> </span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>      (<span class="sc">!</span><span class="fu">is.na</span>(mhi_score_decourage))</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Computing the average score for the items to which individuals responded</span></span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_scores =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(., mhi_score_nerveux<span class="sc">:</span>mhi_score_decourage), </span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm =</span> T</span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Assigning the average of the items to the missing elements</span></span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_nerveux =</span> <span class="fu">ifelse</span>(</span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(mhi_score_nerveux), </span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> mean_scores, </span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> mhi_score_nerveux</span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_calme =</span> <span class="fu">ifelse</span>(</span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(mhi_score_calme), </span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> mean_scores, </span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> mhi_score_calme</span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_triste =</span> <span class="fu">ifelse</span>(</span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(mhi_score_triste), </span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> mean_scores, </span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> mhi_score_triste</span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_heureux =</span> <span class="fu">ifelse</span>(</span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(mhi_score_heureux), </span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> mean_scores, </span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> mhi_score_heureux</span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_score_decourage =</span> <span class="fu">ifelse</span>(</span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(mhi_score_decourage), </span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> mean_scores, </span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> mhi_score_decourage</span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_5_raw =</span> mhi_score_nerveux <span class="sc">+</span> mhi_score_calme <span class="sc">+</span> mhi_score_triste <span class="sc">+</span> </span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a>      mhi_score_heureux <span class="sc">+</span> mhi_score_decourage</span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_t_corrected =</span> (mhi_5_raw <span class="sc">-</span> <span class="fu">min</span>(mhi_5_raw, <span class="at">na.rm=</span>T)) <span class="sc">*</span> (<span class="dv">100</span>) <span class="sc">/</span></span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a>      (<span class="fu">max</span>(mhi_5_raw, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(mhi_5_raw, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb54-67"><a href="#cb54-67" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-68"><a href="#cb54-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If the individual has not answered more than 3 items, the MHI-5 score is</span></span>
<span id="cb54-69"><a href="#cb54-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># not calculable</span></span>
<span id="cb54-70"><a href="#cb54-70" aria-hidden="true" tabindex="-1"></a>  <span class="co"># In such a case, the MHI-5 score is set to 0</span></span>
<span id="cb54-71"><a href="#cb54-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-72"><a href="#cb54-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_t_corrected =</span> <span class="fu">ifelse</span>(nb_na_mhi <span class="sc">&lt;</span> <span class="dv">3</span>, <span class="at">yes =</span> <span class="cn">NA</span>, <span class="at">no =</span> score_t_corrected)</span>
<span id="cb54-73"><a href="#cb54-73" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-74"><a href="#cb54-74" aria-hidden="true" tabindex="-1"></a>  <span class="co"># MHI-3 score</span></span>
<span id="cb54-75"><a href="#cb54-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-76"><a href="#cb54-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">mhi_3_raw =</span> mhi_score_triste <span class="sc">+</span> mhi_score_heureux <span class="sc">+</span> mhi_score_decourage,</span>
<span id="cb54-77"><a href="#cb54-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">score_mhi_3 =</span> <span class="dv">100</span><span class="sc">*</span>(mhi_3_raw <span class="sc">-</span> <span class="fu">min</span>(mhi_3_raw, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">/</span> </span>
<span id="cb54-78"><a href="#cb54-78" aria-hidden="true" tabindex="-1"></a>      (<span class="fu">max</span>(mhi_3_raw, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">-</span> <span class="fu">min</span>(mhi_3_raw, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb54-79"><a href="#cb54-79" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb54-80"><a href="#cb54-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">score_mhi_3 =</span> <span class="fu">ifelse</span>(nb_na_mhi <span class="sc">&lt;</span> <span class="dv">3</span>, <span class="at">yes =</span> <span class="cn">NA</span>, <span class="at">no =</span> score_mhi_3)) <span class="sc">|&gt;</span> </span>
<span id="cb54-81"><a href="#cb54-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>mhi_5_raw, <span class="sc">-</span>mhi_3_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us create two variables which provide the first quantile of the distribution of each score.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>quant <span class="ot">&lt;-</span> .<span class="dv">25</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>q1_mhi_5 <span class="ot">&lt;-</span> <span class="fu">quantile</span>(df<span class="sc">$</span>PERSONNE_score_t_corrected, <span class="at">probs =</span> quant, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>q1_mhi_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>25% 
 60 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>q1_mhi_3 <span class="ot">&lt;-</span> <span class="fu">quantile</span>(df<span class="sc">$</span>score_mhi_3, <span class="at">probs =</span> quant, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>q1_mhi_3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     25% 
58.33333 </code></pre>
</div>
</div>
<p>We can create a variable named <code>PERSONNE_pb_depress_2</code> which will recode people who did not respond to the question regarding depression as <code>No depression</code> (this is not used later in the paper).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_pb_depress_2 =</span> <span class="fu">as.character</span>(PERSONNE_pb_depress)) <span class="sc">|&gt;</span> </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">PERSONNE_pb_depress_2 =</span> <span class="fu">ifelse</span>(</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>      PERSONNE_pb_depress_2 <span class="sc">==</span> <span class="st">"Not reported"</span>,</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">"No depression"</span>, </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> PERSONNE_pb_depress_2)</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let us create a variable which states if each individual’s MHI score is below the first quartile of the distribution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">inf_q1_mhi_5 =</span> PERSONNE_score_t_corrected <span class="sc">&lt;=</span> q1_mhi_5,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">inf_q1_mhi_5 =</span> <span class="fu">factor</span>(</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>      inf_q1_mhi_5,</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&lt;=Q1"</span>, <span class="st">"&gt;Q1"</span>)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">inf_q1_mhi_3 =</span> score_mhi_3 <span class="sc">&lt;=</span> q1_mhi_3,</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">inf_q1_mhi_3 =</span> <span class="fu">factor</span>(</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>      inf_q1_mhi_3,</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&lt;=Q1"</span>, <span class="st">"&gt;Q1"</span>))</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lastly, let us add an ID to each individual (the row number in the table).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The results can be saved:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(df, <span class="at">file =</span> <span class="st">"../data/df_merged.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-hoeymans_measuring_2004" class="csl-entry" role="listitem">
Hoeymans, Nancy, Anna A. Garssen, Gert P. Westert, and Peter FM Verhaak. 2004. <span>“Measuring Mental Health of the <span>Dutch</span> Population: A Comparison of the <span>GHQ</span>-12 and the <span>MHI</span>-5.”</span> <em>Health and Quality of Life Outcomes</em> 2 (1): 23. <a href="https://doi.org/10.1186/1477-7525-2-23">https://doi.org/10.1186/1477-7525-2-23</a>.
</div>
<div id="ref-rumpf_screening_2001" class="csl-entry" role="listitem">
Rumpf, Hans-Jürgen, Christian Meyer, Ulfert Hapke, and Ulrich John. 2001. <span>“Screening for Mental Health: Validity of the <span>MHI</span>-5 Using <span>DSM</span>-<span>IV</span> <span>Axis</span> <span>I</span> Psychiatric Disorders as Gold Standard.”</span> <em>Psychiatry Research</em> 105 (3): 243–53. <a href="https://doi.org/10.1016/s0165-1781(01)00329-8">https://doi.org/10.1016/s0165-1781(01)00329-8</a>.
</div>
<div id="ref-thorsen_predictive_2013" class="csl-entry" role="listitem">
Thorsen, Sannie Vester, Reiner Rugulies, Pernille U. Hjarsbech, and Jakob Bue Bjorner. 2013. <span>“The Predictive Value of Mental Health for Long-Term Sickness Absence: The <span>Major</span> <span>Depression</span> <span>Inventory</span> (<span>MDI</span>) and the <span>Mental</span> <span>Health</span> <span>Inventory</span> (<span>MHI</span>-5) Compared.”</span> <em>BMC Medical Research Methodology</em> 13 (1): 115. <a href="https://doi.org/10.1186/1471-2288-13-115">https://doi.org/10.1186/1471-2288-13-115</a>.
</div>
<div id="ref-yamazaki_usefulness_2005" class="csl-entry" role="listitem">
Yamazaki, Shin, Shunichi Fukuhara, and Joseph Green. 2005. <span>“Usefulness of Five-Item and Three-Item <span>Mental</span> <span>Health</span> <span>Inventories</span> to Screen for Depressive Symptoms in the General Population of <span>Japan</span>.”</span> <em>Health and Quality of Life Outcomes</em> 3 (1): 48. <a href="https://doi.org/10.1186/1477-7525-3-48">https://doi.org/10.1186/1477-7525-3-48</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data-cleaning.html" class="pagination-link" aria-label="Data Cleaning">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>